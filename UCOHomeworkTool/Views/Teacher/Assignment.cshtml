@model UCOHomeworkTool.Models.Assignment

<div class="row">
    <div class="col-sm-10 col-sm-offset-1">
        @foreach (var problem in Model.Problems.OrderBy(p => p.ProblemNumber).ToList())
        {
            <div class="col-sm-1">
                <input id="selectProblem@(problem.Id)" checked="@problem.IsAssigned" data-pid="@problem.Id" type="checkbox" class="pull-right" />
            </div>
            <div class="col-sm-11">
                @{Html.RenderPartial("_Problem", problem);}
            </div>
        }
    </div>
    <div class="col-sm-10 col-sm-offset-1">
        <div class="btn btn-primary pull-right" onclick="assignProblems();">Assign Problems</div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $(".panel-heading").click(function (event) {
            $(event.target).find('a').trigger('click');
        });
        $("input:checkbox").change(function (event) {
            var pid = $(event.target).data("pid");
            if (this.checked) {
                $("#panel" + pid).removeClass("panel-default").addClass("panel-success");
            }
            else {
                $("#panel" + pid).addClass("panel-default").removeClass("panel-success");
            }
        });
    });
    function assignProblems()
    {
        var probids = [];
        $("input:checked").each(function () {
            probids.push($(this).data("pid"));
        });
        var aId = @Model.Id;
        var args = JSON.stringify({ "probids": probids, "assignmentId": aId });
        $.ajax({
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            type: "POST",
            url: "/Teacher/AssignProblems",
            data: args,
            success: function(data)
            {
                toastr.success("The problems were assigned successfully!");
            }
        })
    }
    //# sourceURL=teacherassignment.js
</script>
